<!DOCTYPE html>
<html>
<head>
  <title>FNE Time Clock - Payroll Grouped</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .payroll-group-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: #fff;
    }
    .payroll-group-table th, .payroll-group-table td {
      border: 1px solid #bdbdbd;
      padding: 6px 10px;
      text-align: center;
      vertical-align: middle;
    }
    .payroll-group-table th {
      background: #bdbdbd;
      color: #222;
      font-weight: bold;
    }
    .payroll-date-cell {
      font-weight: bold;
      background: #eee;
      min-width: 110px;
    }
    .payroll-group-table tr:nth-child(even) td:not(.payroll-date-cell) {
      background: #f6f6f6;
    }
  </style>
</head>
<body class="bg-light">
<div class="container mt-5">
  <h2 class="text-center mb-3">Payroll (Grouped by Date)</h2>
  <div id="payroll-table-grouped"></div>
</div>

<script>
function renderPayrollGroupedTable(data) {
  let html = `<table class="payroll-group-table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Project</th>
        <th>Worker</th>
        <th>In</th>
        <th>Out</th>
        <th>Hours</th>
        <th>OT</th>
        <th>Rate</th>
        <th>Amount</th>
      </tr>
    </thead>
    <tbody>`;

  let currentGroupDate = "";
  data.forEach(entry => {
    html += "<tr>";
    if (entry.date !== currentGroupDate) {
      currentGroupDate = entry.date;
      html += `<td class="payroll-date-cell">${entry.date}</td>`;
    } else {
      html += `<td class="payroll-date-cell"></td>`;
    }
    html += `
      <td>${entry.project}</td>
      <td>${entry.worker}</td>
      <td>${entry.in}</td>
      <td>${entry.out}</td>
      <td>${entry.hours}</td>
      <td>${entry.ot}</td>
      <td>${entry.rate}</td>
      <td>${entry.amount}</td>
    </tr>`;
  });

  html += "</tbody></table>";
  document.getElementById("payroll-table-grouped").innerHTML = html;
}

// Example data (should be replaced with server data)
const payrollData = [
  {date: "2025-06-13", project: "Hawthorne Trim", worker: "John", in: "7:00", out: "8:00", hours: 1, ot: 1, rate: 45, amount: 45},
  {date: "2025-06-13", project: "Calado", worker: "Jack", in: "8:00", out: "13:00", hours: 5, ot: 1, rate: 45, amount: 225},
  {date: "2025-06-13", project: "Hawthorne Trim", worker: "Jorge", in: "8:00", out: "10:00", hours: 2, ot: 1, rate: 45, amount: 90},
  {date: "2025-06-15", project: "Calado", worker: "John", in: "10:00", out: "11:00", hours: 1, ot: 1, rate: 45, amount: 45},
  {date: "2025-06-15", project: "Hawthorne Trim", worker: "Jack", in: "11:00", out: "12:00", hours: 1, ot: 1, rate: 45, amount: 45},
  {date: "2025-06-15", project: "Hawthorne Trim", worker: "Lima", in: "12:00", out: "13:00", hours: 1, ot: 1, rate: 45, amount: 45},
  {date: "2025-06-15", project: "Hawthorne Trim", worker: "John", in: "13:00", out: "14:00", hours: 1, ot: 1, rate: 45, amount: 45}
];

// On page load, render the grouped payroll table
window.onload = function() {
  renderPayrollGroupedTable(payrollData);
};
</script>
</body>
</html>
